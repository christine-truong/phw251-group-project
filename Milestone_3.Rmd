---
title: "Milestone #3"
author: "Rachael Baartmans, Lara Petalio, Christine Truong"
date: "Sys.Date()"
output:
  pdf_document: default
  html_document: default
---
```{r importing data}
library(tidyverse)

race_data <-read_csv("ca_csc_outcome_race_data.csv",
            col_select = c(NERVOUS, WORRYING, PROBINTR,
                           PROBDOWN, ASTHMA, HEARTDIS,
                           DIABETES, OTHMENILL, race01, race02, race03,
                           race04, race05, race06, race07, race08,
                           race09, race10, race11, race12, race13,
                           race14, race15),
            na = c("", "NA", "NA/Not Applicable", "N/A", "n/a",
                   "(DO NOT READ) NA/Not Applicable",
                   "(DO NOT READ) Refused",
                   "(DO NOT READ) Don't know"))

smoker_data <- read_csv("ca_csc_smoker_data.csv",
            col_select = c(smokstat, WHEREBUY, BUYCALIF,
                           HOWMANY, SMOK6NUM, SMOK6UNI),
            na = c("", "NA", "NA/Not Applicable", "N/A", "n/a",
                   "(DO NOT READ) NA/Not Applicable",
                   "(DO NOT READ) Refused",
                   "(DO NOT READ) Don't know"))
```
\newpage

## Subset rows and columns as needed 
We have decided that we do not need to subset any rows and columns since we already did this during the importing process of our data (specified in the col_select argument of the read_csv function).

\newpage

## Clean variables for analysis 
**Minimum of 2**
\newline **Examples: Recode invalid values/handle missing fields/recode categories **

```{r clean variables}

#Changed casing for variables from capitals to lowercase in both dataframes
#of race_data and smoker_data
names(race_data) <- tolower(names(race_data))
names(smoker_data) <- tolower(names(smoker_data))

#Changed the data type of "howmany" from character to numeric in order to
#perform calculations for pack-years in the future
smoker_data$howmany <- as.numeric(smoker_data$howmany)

#Removed NA's and string values from smoker_data in order to calculate
#pack-years later for variables "howmany", "smok6uni", and "smok6num"
smoker_data_2 <- smoker_data %>% filter(!is.na(howmany),
  howmany != "100 or more cigarettes", smok6uni == "Years", !is.na(smok6num))

##NEED TO ASK GSI ABOUT "100 OR MORE CIGARETTES" BEING FILTERED OUT - CAN
##IMPACT PACK-YEARS CALCULATION

#Viewed unique values assigned to the variables "howmany", "smok6uni", and
#smok6num to see if all NA's and strings were removed
unique(smoker_data_2$howmany)
unique(smoker_data_2$smok6uni)
unique(smoker_data_2$smok6num)

```

\newpage

## Create New Variables needed for analysis
**Minimum of 2 created from existing columns **
\newline**Examples: calculating the rate or combining character strings**

```{r new variables}

#Created new variable "race" to combine variables race01:race15
race_data_2 <- race_data %>%
  mutate(race = case_when(race01 == "Yes" ~ "race01",
        race02 == "Yes" ~ "race02",
        race03 == "Yes" ~ "race03",
        race04 == "Yes" ~ "race04",
        race05 == "Yes" ~ "race05",
        race06 == "Yes" ~ "race06",
        race07 == "Yes" ~ "race07",
        race08 == "Yes" ~ "race08",
        race09 == "Yes" ~ "race09",
        race10 == "Yes" ~ "race10",
        race11 == "Yes" ~ "race11",
        race12 == "Yes" ~ "race12",
        race13 == "Yes" ~ "race13",
        race14 == "Yes" ~ "race14",
        race15 == "Yes" ~ "race15")) %>%
  select(-(race01:race15))
#Used select() function to remove original race01:race15 variables

#Viewed the updated data set, race_data_2
race_data_2

#Created new variable "packs_per_day" for future calculations for pack-years
smoker_data_3 <- smoker_data_2 %>% mutate(packs_per_day = howmany/20)

#Viewed the final cleaned data set, race_data_3
smoker_data_3

```
\newpage

## Data dictionary based on clean dataset 
**must include: variable name, data type, and description**
```{r data dictionary}
#For each of the 4 data elements we pick, we must use typeof() function and
#describe what it stands for using the research documents published for
#each variable

#Instructions: "Data dictionary based on clean dataset
#(minimum 4 data elements), including: Variable name, Data type, Description.
#Data dictionary can be included as text or table, but should be easy for
#teaching team to interpret/read."

typeof(smoker_data_3$wherebuy)
typeof(smoker_data_3$howmany)
typeof(race_data_2$nervous)
typeof(race_data_2$asthma)
```
## Variable 1: wherebuy
- Data Type: character
- Description: The "wherebuy" variable contains the responses to the survey question of 'where do/did you usually buy your cigarettes?' this variable gave options of general locations, somewhere else, and don't know/refused. 

## Variable 2: howmany
- Data Type: double
- Description: The variable "howmany" contains the numeric data related to how many cigarettes were smoked in the last 30 days. The values given for this question were 1 to 100. 

## Variable 3: nervous
- Data Type: character
- Description: The variable "nervous" is a character variable that looks at whether individuals felt nervous, anxious, or on edge in the last two weeks. The responses for this question were don't know, refused, not at all, several days, more than half the days, and nearly everyday. These responses correlated to a numeric value but were put into the dataset in character form. 

## Variable 4: asthma
- Data Type: character
- Description: The variable "asthma" is related to medical history as given by a doctor in the past. This question asks if a physician has ever told you that you have asthma. This had three response options fo Yes, No, Refused. 

\newpage
## Tables with descriptive statistics for 4 data elements 
```{r tables}
#Use Kable to make tables like in problem set 5


```

